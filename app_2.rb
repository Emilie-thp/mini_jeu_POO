require 'bundler'
Bundler.require

require_relative 'lib/game'
require_relative 'lib/player'

system "clear"


puts '

  ______ _       _     _      __             _ _  __     
 |  ____(_)     | |   | |    / _|           | (_)/ _|    
 | |__   _  __ _| |__ | |_  | |_ ___  _ __  | |_| |_ ___ 
 |  __| | |/ _  |  _ \| __| |  _/ _ \|  __| | | |  _/ _ \
 | |    | | (_| | | | | |_  | || (_) | |    | | | ||  __/
 |_|    |_|\__  |_| |_|\__| |_| \___/|_|    |_|_|_| \___|
            __/ |                                        
           |___/                                         

'
puts '
     ----.
    ;;  _}
    ;@   >
    |\   7
    / `-- _         ,-------,****    - - - Bienvenue dans FIGHT FOR LIFE !  - - -
 ~    >o<  \---------o{___}-          
/  |  \  /  ________/8;
|  |       /         
|  /      |

\n

'

puts "Commence par créer ton personnage, quel est ton nom ?"
user_name  = gets.chomp
user = HumanPlayer.new(user_name)
print "\n\nTrès bien, pour l'instant "
user.show_state

#creation of enemies array
enemies = Array.new
player1 = Player.new("Ordinatueur")
enemies << player1
player2 = Player.new("Killing_bot")
enemies << player2

puts "\n\n=================> Initialitation des ennemis <============================================="
puts "Appuie sur Entrée"
gets
puts ">> Tu vas devoir te battre contre #{player1.name} et #{player2.name}, sois sans pitié... <<\n\n"                                                           
puts "                                                                          
                 .@@@@@@                               @@@@@@,                 
                 @@@@@@@(                             *@@@@@@@                 
             ,@@@@@@@@@@                               &@@@@@@@@@*             
             @@@@@@@@@@@                               @@@@@@@@@@@             
             &@@@@@@@@@@@@        (@@@@@@@@@(        @@@@@@@@@@@@@             
               ,(*   @@@@@@@   @@@@@@@@@@@@@@@@@   @@@@@@@   ,(,               
                       @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                       
                         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@                         
                           @@@@@@@@@@@@@@@@@@@@@@@@@                           
                           @@@@    &@@@@@@@@.   ,@@@                           
                           @@@.        @&        @@@                           
                           @@@       .@@@%       @@@                           
                           %@@@@##&@@@.  @@@@%(&@@@&                           
                           %@@@@@@@@@  @  @@@@@@@@@&                           
                            #@@@@@@@@@@@@@@@@@@@@@%                            
                             .@@/@@@@@@@@@@@@@/@@.                             
                             @@@ @@@@@@@@@@@@@ @@@                             
                           @@@@@               @@@@@                           
                         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@                         
                       @@@@@@@,@@@@@@@@@@@@@@@@@*@@@@@@@                       
               .*,   @@@@@@@   ,@@@@@@@@@@@@@@@/   @@@@@@@   .*.               
             %@@@@@@@@@@@@        %@@@@@@@@@%        @@@@@@@@@@@@&             
             @@@@@@@@@@@                               @@@@@@@@@@@             
             *@@@@@@@@@&                               &@@@@@@@@@/             
                 @@@@@@@(                             *@@@@@@@                 
                 ,@@@@@@                               @@@@@@*                 
                                                                            "
puts "Appuie sur Entrée pour commencer la partie"
gets

while user.life_points > 0 && (player1.life_points > 0 || player2.life_points > 0) do # condition to keep on fighting while 2 players are alive
  puts "Voici l'état de ton joueur :"
  puts user.show_state
  puts "Quelle action veux-tu effectuer ?"
  puts "tape - a - pour chercher une meilleure arme"
  puts "tape - s - pour chercher à te soigner"
  puts ""
  puts "Tu préfères passer à l'action et attaquer un joueur en vue :"
  #the 2 following loop are here to prevent from the case where a bot is already dead and the user would like to kill him again
    if player1.life_points>0 
      print "Tape - 0 - pour attaquer #{player1.name}. --> "
      print "#{player1.show_state}"
      else
      puts "#{player1.name} est mort, tu ne peux plus l'attaquer}"
    end
    if player2.life_points>0 
      print "Tape - 1 - pour attaquer #{player2.name}. --> "
      puts "#{player2.show_state}"
      else
      puts "#{player2.name} est mort, tu ne peux plus l'attaquer"
    end 

  choice = gets.chomp.to_s

  	if choice == "a" then
  		user.search_weapon
  		elsif choice == "s"
  		user.search_health_pack
  		elsif choice == "0"
  		puts "================> Let's fight <========================================================== \n\n"
  		user.attacks(player1)
  		puts "\n"
  		elsif choice == "1" 
  		puts "================> Let's fight <========================================================== \n\n"
  		user.attacks(player2)
  		puts "\n"
  		else puts "!!! erreur de saisie !!! dommage tu passes ton tour - échec critique"
  	end
  	
  	puts "\n"
  	
    if player1.life_points > 0 || player2.life_points > 0
    	puts "================> Les ennemis contre-attaquent... <=====================================" 
      puts "Appuie sur Entrée pour continuer"
  	  gets

    	enemies.each{|player| 
  		if player.life_points > 0 then
  			player.attacks(user)
  			puts "\n"
  		  else puts "#{player.name} est mort, il ne peut plus attaquer"
  			puts "\n"
      end
  		}
    end
    
break if user.life_points <= 0 || (player1.life_points <= 0 && player2.life_points <= 0)
#not to display "new tour" if game is finish

    puts "\nAppuie sur Entrée pour continuer et riposter"
    gets
    puts "================> Nouveau tour <========================================================= \n"
    
end # end of while loop

if player1.life_points <= 0 && player2.life_points <= 0 then 
  puts "YOU KILLED IT !!!"
  puts '                                                                                                  
                         %@@@@@&,                                                                  
                       #&@@@@@&@&&(                                                                
                      @%@@@(,...,,%                                                                
                     @@&@@%*.   ..,       .   ,*.                                          */,.    
                     #/@&*,,%@@(.,*   .*(/*&@#,                                           .,*/*,   
                     */.....  ,*,*/ //(&&@@@#.                                           *#&%#/*,  
                    #@#%. .,*/.,/%.(#&@&&@&                                             ((////*/*  
                   ,,@(.  .,(@@./&%@%@@./   ..,,                        ,     . ,# ,.,/(%%((/(   
                  ...,,,,,/*,,.#,&&@@@@%,  ,. &%/,,,*                   (%@@     ##**,%%%&&&((   
                 ...**(%&@@&/ ./@@@@@@#% ,   .,.,#***                ,&@@@@@@&.* .*%((&&&&/#%#&    
               ,..,*(#@@#(&@@@@@@@@@&,..,*(/  **./%(                 //#@@@&&,..**&%&@@@@&%&     
        (**/(#,,,(#(&&@@%/.  *%*(@@((%&@#%, .*/@&*           .,///(/@@@@%,*(%@@@&@@@@&@//##      
       ,...(#*,,(&&&        . *.  .///*#(,.,.*#@(  */********/((%((@@@@@@@@@@@@@@@&%&.,/((.      
      ,.../(..,(@@#.            .//,  ,/#%/((*.#&&*,*/((//////((#@@&@@@@@@@@@@@@@@@%#%@@%#&(       
      ,,**.. ,#@/     ..   ., . .(@@#. .*     .****/((##&%#&%&&&@@&@@@@@@@@@@@@,   ##. (/&/        
      ,*....*%@,..     . .     (% @@@#,..*  .,,*/(#%&@@@@@@@@&&&@&@@@@@@@@@@@,         ( (         
     ,.  .,/%@*....*/###*..   *,&%&@@@#,..,*,*/#%&@@@@@@@@@@@@@@&@@@@@@@@                          
       .,*(%@#(&&,   .  .  ,*,.*@%@@&(/*,*/%&&@@@@@@@@@@&&@@&@@@@@@%                           
     ..*(#&@@&.     ,,         ,/(@/ ##(///#%&&@@@@@@@@@@@@&&&&%@@@#                               
      .&@.*@%*,(               ..*. (///(#%&&&&@@@@@@@@@@@@@@@@@@                                  
          ,,&,               ./&@&%(//(&%&&&@@@@@@@@@@@@@@@@@@                                     
               /      (&&&%&&%&&#% &&@@@@@@@@@@@@@@@*,                                         
             .     (%&&%&%#&&&%&(%&&@@@@@@@@@@@@@#                                               
                 (%(##((&#&%&&&&%@@@@@@@@@@@@@@#                                                 
                ((####%#&&(#&&&@&@@@@@@@@@@@@@@%                                                   
               /##%&&%&&%(&&@@@@@@@@@@@@@@@@@@,                                                    
               /(%&%#@%@&&@@@@@@@@@@@@@@@@@.                                                     
               /%#&%&@%#@@@@@@@@@@@@@@@@@(                                                       
               /(###&&(((%@@@@@@@@@@@@@@@&                                                         
               #(##((/#%&@@@@@@@@@@@@@@*                                                           
               /(#//(#%&%@@@@@@@@@@@*                                                              
             ,@#/*/###@&&@@@@@@@@@,                                                                
             @##*/#%/&@&@@@@@@@@,                                                                  
             @*#/#%(/@@#%@@@@@@                                                                    
              ,%(##*%@@#&@@@@@&                                                                    
              *%(#(/@@@@@@@@                                                                     
              /%((/#@@%#@@@@@@                                                                     
              #&((/&@@#%@@@@@@                                                                     
              ###((@@@#&@@@@@*                                                                     
              (%((%@@&@@@@.                                                                      
              /(@@@&%&@@@%                                                                       
              (#(%@@@@&@@@@                                                                        
              &%&@@@@@@@@@*                                                                        
               @&@@@@@@@@@.                                                                        
               @@@&&@@@@@                                                                        
               .%@&@@&&@@@@@                                                                       
                %@&@@&%@@@@@&                                                                      
                /@@@@@%@@@@@@%                                                                     
                .@@@@@%@@@@@@@&                                                                    
                 @@@@@&&@@@@@@@%                                                                   
                 @@@@@@&&&&&@@&%                                                                   
                 .@@@@@@@&@&&&*                                                                  
                 .@@@@@@@@@@@@@@#,                                                                 
                 ,@@@@@@@@@@@@@@@&                                                                 
                 .@@@@@@@@@@@@@@@&,                                                                
                  @@@@@@@@@@@@@@@&(                                                                
                  @@@@@@@@@@@@@@@&%/&                                                              
                  %,@,   @@&(&,&/%@                                                              
                   #@  (/*%@,**&%&&&                                                             
                   ,*#&&&%&&%/%&&@@%@*   '


  else 
    puts "LOOSEEER ! You get killed by two robots"
    puts '

                                                                                                               . .     
                                                    .*,,,.                                                             
                                                , //,.     /...                                                        
                                                */.,    .   *, ,                                                       
                                               %//*    . ...,., .                                                      
                                              #%,*.      ,,  *,                                                        
                                             %  ,*  ,/***/..(%.*                                                       
                                             ,* .,.*/% /./.,*(  .                                                      
                                            ,   ,.   ,.,,/,/ **. ,                                                     
                                         .,.     /..****,#%,.,,.,.,,                                                   
                                        ..       ,. .*,#/%/ *  . .,..                                                  
                                      ,,        ,/,  .*((* .,...   ,*.                                                 
                                     **(/,.,#   ..   *../.   ...  **%/                                                 
                                    ,#, #/  (   (      ,..    ../. .  .#/.                                             
                                  (/ *#.   ./  ..             .*..#, . ,,%,                                            
                                 * ,, (,   ,,  *#.      .    * / ,/   .  (.%,                                          
                                / ,/    /  ,*  ,(,,     .    ,*, ,*,    ../*#                                          
                               ( ,**    ** ** , /       ,,. , *. .    .  .#(#                                          
                              #.,*(      .,(* //,.      .   * ( ,##*,%,   (#/(                                         
                             .(/#/.    .,**#*,,/,.     .,  .,.,  .. /%/ .  /#((.                                       
                              .//,         *. ,(,      ,,  ,*.,  ., ,##   . *#/,                                       
                              #/##        *.  ,(,      .,  ,, /  .. /*%*..   #%..                                      
                             #(,, ,*,. ...*///##(.**.. *      *. ,    *%*,    /%.                                      
                            ,//%(#,**(/(..   /,,,  .. /(/*./(*. .%(*  **%/     ((                                      
                       ,/(*#((#,*(*((((##%/%&&&%&%&%&#%*#(*,*.*(#(./#(#.%,.*,./#*.                                    
                     *%/(#.* ,*/%#(((/(//.** *,(*/,***.../* *//##%###.***//(,, /%*.                                    
                   /%(#(,*,*(/,//#/(/,.//((, /*/////*/*,**,*,/,(*(%//(#####/,*/(.//.  .                                
                  # #(*/(*.,,,..**.((/(,.,,,,, *,*/,,* ,,.,./* ,,,/%##,,.,**,,/(##%(/*.                                
             .,  */(%# ., ...,*,.../*,*(( ,,#,,/ .*//,,.,*.*,(/*,, .*/((%(,..,,,*,..,*(,####.                          
       ,(((,  (%#././ *,,..,*.*,**    ,/#/,*#/*/*,////,*/,,/ /*.,. ..,./**##%.*/.,. *,,. ./,.%                         
     /((.*,,*%.*, ,,***...,..., .,#%(,#(,%#*/#,,((#(%#(#%(/#*,. #/(**,,*. .,,/%#(*,.  ,.... **#/                       
    ( #%&/#,/  . /.#///,..,,*,,* #/&%/*,.%#(.#*#%/%/##%/%#/%/*%#/#*%&%/**# ..,*###((*  ./,..*.%.                      
   *%,%(,,.*,* . .# //  *(( *,( ,(*(.%&&(#%&#/,%/%#/#%/%/%#/*(*&% /%/.%##,....,,%/%,%#,*. ,*.#(                      
   (/&*&.  .  (,/(/##.../ ,/##%*&*&%/%&&&%* *&%&&%&%&&&%&&%(&%&(%/%,#(/%(%(,,. .,.(##%*,#  ..,/(.                     
  ,#(###((,.  ,./,,/..,*,%/ %&%&%&&&&%&%&%#/(#(#%&*%(((####%(***%/*%(%/##//%,,.,*.,**(#( %.   ,/*#*                    
  /%&#.%*/,. ...(/,*. */%,#*%&.,,,*%&&*%(/,%(   ,///(#%(%(%/*/./%/#/%/##/%#(/*.,*,.#%/%(,  ., */#/                   
  .(/% #   ., /%##/,* */(,*  ..&***.%(,&%(..**#,/,(,/..**(##%///,*./*#*,    /##(,*./,(((&(  ... .//*/                  
  .*(,%  (%###/(%#/*/*///(,  .*/.. *#.*&%(....(  ,/ ,(/(/##(###(#/,,%#/.   .#(%/*, .*,(%&%( .. .,,.*(/                 
   * #%&#*%(.##*(/,*(.%(#     .,. *#(*&%* ..*#..,(,.//#(./(%&%**(*,(,(     .#%/* ** *((&./* ,.,,*,.#/*.               
     ..#%.   ,, *(((/,(//,     , ,,,((.(%#. .(#.(,(*,*  **//%/(, #.##*/      /*%* .  */##/.//..  .. ,((/.              
           ,..  (.(/.//(*.  ,, , ,  /&,(%(*  *((. ,./*,./*./*(*/,. (%#       ,.#,    .*(.%  ,/..,   ,.*(*.             
            ..  *//. ,,%*//. , ,.,*. #%(&%/.  #  *..*/  **  (**.,(*/*# .       %#   ..*((#/  ./(    . .,(/  .          
            .. ..(,. *(%*   ,    ,/  *##%(/, ,(/,, /%(/(..* ./(,,,.#(*..       %*#.. .,,(*%   ..(,      */#  ,         
           *.   ./,..#(/.        #,   #%&##. .*. ***%/ (/...*///*,.((,..       (#** .. .//%    ,.**,     ,/#   ,       
           ,.  .,/.*/*./        .**    ((&%(..*    *(( ((*,.*,.,/  %(  ,        #.#..  .*/#,      */,,  .. ((          
        .. ..  ,,#.,*/,(        ...    .%&%(/*#.(/..,/ %(* .(# * ,*#,  ,         /#*# ./ *(#.   ...,,/  .  ,/((%#(,,.. 
         , ....,,*..,/ #        ..,.    *##*#.*   ,.,. ##* ..**%*,((  *,          /#,/*..,./#, .  .. .*,  ..    ,**/#/ 
       . ..  . .,*,,,/,(         .,,    .#/&%.*/   ,,.*%(     *(, %.(. /           /#*/ .  (%(.    .  ,** .  ..(/, *.  
     . ,  . .  .,(..,.*.         .*#    //.%#,#,,,* *,/#% . ..*/.(/    *            #*(   .,,#(..   . .,.,*(,*.  .     
     ,     ..  ../, *,/,        , ,,    *( /%#*./ ,  /*##/*(#/, (%/    ,.           */*( ..(./## .,.   ..  **.         
     .  .        .(, .*/           (,   ,( ((#,.,,(,   %//. ,...(/(#   *.           (#/,/.,,//((#,#*(*. .          .   
        .       ,.,( .**.          *((/,  *//%*. ***,  ///*.., *((*    .*            ,((*,/.*,,*/#,./(,*.              
                   (**/.(             /   (/,%(. . ,,  */,.(*  ,(% , /.                 .( .. ,,*.,%(,.(,              
                 / ./../(*           /    /**%#. , (   ,/* ,  . /%                           ... ,/,.#%*               
                */ .*,  //*(           /, /((%#  .  ,  .(*,     (%                          .    ...(*  .##            
                . ./(,*/./ **             /(*%#(  . *   #,.     /#,                      .***..*, ,*  ,*,              
                 /#  ,*. ( *.       ,#*   *#/%,/  . /  ((/      /(/       .                   *, ., ..    ,(.          
                /#%   .*,,            ,,.  #/%,/. ,*/  (**     .(/*                              **  ((//##/           
                 / ,*.**%                  (/%#(. .* * (*,     .#(                                                     
                      *,#                  /(#&%* ., , ./,.    .#%                                                     
                                           ./%&%* .. . */,    .///                                                     
                                            #(&%. .. , **,    ,/#*                   .                                 
                                            ##*%. ./.. /*#   ///%                                                      
                                            .%/%* ,/,. /*(   //*#                    .                                 
                                            .#/%, ,(* .//,  #//#(                                                      
                                             %&%/ ,(* *,#  /%.(#*                                                      
                                             (&%/  (/,((# ,((,/%.                                                      
                                          *. ,&%,  /// #*  /#,#/     .                                                 
                                          ./#%&     /.(#    ,/*##/                                                     
                                        /../** /(*( / #%    ,,(#*                                                      
                                         .#%#///*.%. .*.#,    ,#%(,                                                    
                                     .* .%&%&##/%#&/  *(,((//..,#(#%    .                     *                        
                                           . *#%.    ,,*%(##&&/,                                               .     
                                                         ./#%.    (*/,                                                 
                                                                ,/  .                                                  
                                                                                                                 .     
' 
end 

	
 

